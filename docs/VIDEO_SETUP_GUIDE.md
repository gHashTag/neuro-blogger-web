# üé¨ –í–∏–¥–µ–æ-–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤ –ø—Ä–æ–µ–∫—Ç–µ 999-web

## ‚úÖ –ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ

### üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `src/remotion/` - Remotion –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `src/video-templates/` - –®–∞–±–ª–æ–Ω—ã –≤–∏–¥–µ–æ (LipSyncTemplate)
- `src/utils/video/` - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- `src/pages/api/video/` - API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∞
- `public/temp-videos/` - –í—ã—Ö–æ–¥–Ω—ã–µ –≤–∏–¥–µ–æ—Ñ–∞–π–ª—ã

### üéØ –ü–µ—Ä–≤—ã–π —Ç–µ–º–ø–ª–µ–π—Ç: LipSyncTemplate

–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–µ–º–ø–ª–µ–π—Ç —Å:

- üì∏ **–û–±–ª–æ–∂–∫–∞ –∫–∞–≤–µ—Ä–∞** (2 —Å–µ–∫—É–Ω–¥—ã –≤ –Ω–∞—á–∞–ª–µ)
- üé§ **Lip-sync –≤–∏–¥–µ–æ** (–æ—Å–Ω–æ–≤–Ω–æ–µ, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 2—Å)
- üéµ **–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞** (—Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞)
- üé¨ **–ë—ç–∫–≥—Ä–∞—É–Ω–¥ —Ä–æ–ª—ã** (–º–µ–Ω—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã, –º–∏–∫—à–∏—Ä—É—é—Ç—Å—è)
- ‚ú® **–ê–Ω–∏–º–∞—Ü–∏–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã** (fade-in, scale, –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã)

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. Remotion Preview (–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

```bash
# –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–µ–≤—å—é
npx remotion preview src/remotion/index.tsx --port=3001
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3001 –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

### 2. –ü—Ä—è–º–æ–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ CLI

```bash
# –†–µ–Ω–¥–µ—Ä –ø–µ—Ä–≤–æ–≥–æ —Ç–µ–º–ø–ª–µ–π—Ç–∞
npx remotion render src/remotion/index.tsx LipSyncTemplate output.mp4
```

### 3. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ API

```typescript
// POST /api/video/render
{
  "composition": "LipSyncTemplate",
  "props": {
    "lipSyncVideo": "–ø—É—Ç—å –∫ lip-sync –≤–∏–¥–µ–æ",
    "coverImage": "–ø—É—Ç—å –∫ –æ–±–ª–æ–∂–∫–µ",
    "backgroundMusic": "–ø—É—Ç—å –∫ –º—É–∑—ã–∫–µ",
    "backgroundVideos": ["–ø—É—Ç—å1", "–ø—É—Ç—å2", "–ø—É—Ç—å3", "–ø—É—Ç—å4"],
    "coverDuration": 2,
    "lipSyncDelay": 2,
    "backgroundVideoOpacity": 0.3,
    "musicVolume": 0.5
  },
  "videoId": "unique-id"
}
```

### 4. –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:80/video-test –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ UI.

## üìÅ –¢–µ—Å—Ç–æ–≤—ã–µ –∞—Å—Å–µ—Ç—ã

–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –≤ `/public/test-assets/`:

- `lip-sync.mp4` - –æ—Å–Ω–æ–≤–Ω–æ–µ lip-sync –≤–∏–¥–µ–æ
- `cover01.png` - –æ–±–ª–æ–∂–∫–∞ –∫–∞–≤–µ—Ä–∞
- `news.mp3` - —Ñ–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞
- `bg-video01.mp4` –¥–æ `bg-video04.mp4` - —Ñ–æ–Ω–æ–≤—ã–µ —Ä–æ–ª—ã

## üéõÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º–ø–ª–µ–π—Ç–∞

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã LipSyncTemplate:

```typescript
interface LipSyncTemplateProps {
  lipSyncVideo: string; // –ü—É—Ç—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –≤–∏–¥–µ–æ
  coverImage: string; // –ü—É—Ç—å –∫ –æ–±–ª–æ–∂–∫–µ
  backgroundMusic: string; // –ü—É—Ç—å –∫ –º—É–∑—ã–∫–µ
  backgroundVideos: string[]; // –ú–∞—Å—Å–∏–≤ –ø—É—Ç–µ–π –∫ —Ñ–æ–Ω–æ–≤—ã–º —Ä–æ–ª–ª–∞–º
  coverDuration: number; // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∫–∞–∑–∞ –æ–±–ª–æ–∂–∫–∏ (—Å–µ–∫)
  lipSyncDelay: number; // –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º lip-sync (—Å–µ–∫)
  backgroundVideoOpacity: number; // –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ñ–æ–Ω–∞ (0-1)
  musicVolume: number; // –ì—Ä–æ–º–∫–æ—Å—Ç—å –º—É–∑—ã–∫–∏ (0-1)
}
```

### –§–æ—Ä–º–∞—Ç –≤–∏–¥–µ–æ:

- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ**: 720x1280 (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –¥–ª—è —Å–æ—Ü—Å–µ—Ç–µ–π)
- **FPS**: 30
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 15 —Å–µ–∫—É–Ω–¥ (450 –∫–∞–¥—Ä–æ–≤)
- **–ö–æ–¥–µ–∫**: H.264

## üîß –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm install

# –ü—Ä–µ–≤—å—é –∫–æ–º–ø–æ–∑–∏—Ü–∏–π
pnpm video:preview

# –ü—Ä—è–º–æ–π —Ä–µ–Ω–¥–µ—Ä
pnpm video:render

# –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞ —Å API
pnpm dev

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
pnpm exec tsc --noEmit
```

## üé® –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ–º–ø–ª–µ–π—Ç–æ–≤** - –ø–æ –æ–±—Ä–∞–∑—Ü—É LipSyncTemplate
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
3. **Batch —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥** - –º–∞—Å—Å–æ–≤–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –≤–∏–¥–µ–æ
4. **Cloud —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Remotion Lambda/CloudRun
5. **UI –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** - –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

- –í—Å–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `staticFile()` –∏–∑ Remotion
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ Node.js
- –í—ã—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `public/temp-videos/`
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è cloud —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞** "registerRoot() was called more than once" —Å –ø–æ–º–æ—â—å—é –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

## üêõ –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå registerRoot() was called more than once

**–ü—Ä–æ–±–ª–µ–º–∞**: –í dev —Ä–µ–∂–∏–º–µ Remotion –≤—ã–¥–∞–≤–∞–ª –æ—à–∏–±–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ root –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ —Å –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `__REMOTION_ROOT_REGISTERED__`:

```typescript
if (!globalThis.__REMOTION_ROOT_REGISTERED__) {
  try {
    registerRoot(RemotionRoot);
    globalThis.__REMOTION_ROOT_REGISTERED__ = true;
  } catch (error) {
    console.warn("üé¨ Remotion root already registered, skipping...");
  }
}
```

---

## üé§ LIP-SYNC –∫–∞–∫ –û–°–ù–û–í–ê (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ!)

### ‚ú® –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

**üéØ –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

- **Lip-sync - —ç—Ç–æ –û–°–ù–û–í–ê!** –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø–æ–¥ –µ–≥–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–û–±—â–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** = `coverDuration + lip-sync –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å`
- **–§–æ–Ω–æ–≤—ã–µ –≤–∏–¥–µ–æ** –∑–∞—Ü–∏–∫–ª–∏–≤–∞—é—Ç—Å—è –Ω–∞ –≤—Å—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ù–∏–∫–∞–∫–∏—Ö –∑–∞–¥–µ—Ä–∂–µ–∫** - lip-sync –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–±–ª–æ–∂–∫–∏

**üéõÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π UI:**

- –î–æ–±–∞–≤–ª–µ–Ω–∞ **Zod schema** –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü–æ–ª—è —Ç–µ–ø–µ—Ä—å **—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ** –≤ Remotion Studio
- –°–ª–∞–π–¥–µ—Ä—ã –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- –û–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞

### üèóÔ∏è –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏:

```
‚è±Ô∏è Timeline:
‚îå‚îÄ 0s ‚îÄ‚î¨‚îÄ coverDuration ‚îÄ‚î¨‚îÄ lip-sync –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚îÄ‚îê
‚îÇ Cover ‚îÇ     Lip-sync    ‚îÇ      (–¥–æ –∫–æ–Ω—Ü–∞)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   üì∏        üé§ –û–°–ù–û–í–ê           üé§ –û–°–ù–û–í–ê

üéµ –ú—É–∑—ã–∫–∞: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
üé¨ –§–æ–Ω–æ–≤—ã–µ: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
   (–∑–∞—Ü–∏–∫–ª–∏–≤–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫)
```

**–ü—Ä–∏–º–µ—Ä—ã –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

- –ï—Å–ª–∏ lip-sync = 28.9—Å, cover = 2—Å ‚Üí **–ò–¢–û–ì–û: 30.9—Å**
- –ï—Å–ª–∏ lip-sync = 45—Å, cover = 3—Å ‚Üí **–ò–¢–û–ì–û: 48—Å**

### üéõÔ∏è –ö–∞–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Studio:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3001`
2. –í—Å–µ –ø–æ–ª—è —Ç–µ–ø–µ—Ä—å **—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ**:
   - üé§ `lipSyncVideo` - –ø—É—Ç—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –≤–∏–¥–µ–æ
   - üì∏ `coverImage` - –ø—É—Ç—å –∫ –æ–±–ª–æ–∂–∫–µ
   - üéµ `musicVolume` - –≥—Ä–æ–º–∫–æ—Å—Ç—å (0-1)
   - üé® `backgroundVideoOpacity` - –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ñ–æ–Ω–∞
   - ‚è±Ô∏è `coverDuration` - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±–ª–æ–∂–∫–∏

---

üïâÔ∏è **–ú—É–¥—Ä–æ—Å—Ç—å**: _"‡§∏‡§∞‡•ç‡§µ‡§ß‡§∞‡•ç‡§Æ‡§æ‡§®‡•ç‡§™‡§∞‡§ø‡§§‡•ç‡§Ø‡§ú‡•ç‡§Ø ‡§Æ‡§æ‡§Æ‡•á‡§ï‡§Ç ‡§∂‡§∞‡§£‡§Ç ‡§µ‡•ç‡§∞‡§ú"_ - –ö–∞–∫ –≤—Å–µ –¥—Ö–∞—Ä–º—ã –Ω–∞—Ö–æ–¥—è—Ç –ø—Ä–∏–±–µ–∂–∏—â–µ –≤ –ö—Ä–∏—à–Ω–µ, —Ç–∞–∫ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–∏–¥–µ–æ –Ω–∞—Ö–æ–¥—è—Ç –æ—Å–Ω–æ–≤—É –≤ lip-sync! üé¨‚ú®
